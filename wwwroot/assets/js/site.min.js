function renderLogTables(){$.each($(".log-table"),function(n,t){t=$(t);const i=t.attr("data-channel"),r=t.attr("data-sender"),u=t.attr("data-timezone");renderLogsTable(i,r,u,t)})}function renderLogsTable(n,t,i,r){const u=moment($("#dtpStart").val(),"DD/MM/YYYY HH:mm").tz(i).valueOf(),f=moment($("#dtpEnd").val(),"DD/MM/YYYY HH:mm:ss").tz(i).valueOf();r.DataTable({ajax:`/Logs/Get/${n}/${t}?from=${u}&to=${f}`,deferRender:!0,columns:[{data:"timestamp",type:"date"},{data:"sender"},{data:"message"}],columnDefs:[{targets:0,responsivePriority:-1,render:function(n){return moment(n).tz(i).format("DD/MM/YYYY HH:mm:ss")},className:"all"},{targets:1,className:"all"},{targets:2,className:"all"}],rowCallback:(n,t)=>{t.type>0&&($(n).css("background-color","rgba(0, 0 ,0 , .05)"),$(n).html(`<td>${moment(t.timestamp).tz(i).format("DD/MM/YYYY HH:mm:ss")}</td><td class='text-center text-danger' colspan='2'>${t.message}</td>`))},order:[[0,"desc"]],lengthMenu:[[25,100,200,500,1e3],[25,100,200,500,1e3]],responsive:{details:!1}})}jQuery.postJSON=function(n,t,i){return jQuery.ajax({url:n,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t),success:i})};$(document).ready(function(n){"use strict";n("#stalkForm").on("submit",t=>{t.preventDefault();const i=n("#stalkUser").val();location.href=`/Logs/Stalk/${i}`});n("#addChannel").on("click",function(){Swal.fire({title:"Enter channel name",input:"text",showCancelButton:!0,confirmButtonText:"Add",confirmButtonColor:"#2ec551",showLoaderOnConfirm:!0,preConfirm:t=>n.get(`/Channel/Add/${t}`).then(n=>{if(!n.success)throw new Error(n.message);return n}).catch(n=>{Swal.showValidationMessage(n)})}).then(n=>{const t=n.value;Swal.fire({icon:"success",title:"Success",text:t.message}).then(()=>{location.reload()})})});n(".delete-channel").on("click",function(){const t=n(this).attr("data-channel");Swal.fire({title:"Are you sure?",text:"If you remove this channel, you won't be able to view the logs and your credit will not be refunded.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef172c",confirmButtonText:"Yes, remove this channel",cancelButtonText:"Nevermind",showLoaderOnConfirm:!0,preConfirm:()=>n.get(`/Channel/Remove/${t}`).then(n=>{if(!n.success)throw new Error(n.message);return n}).catch(n=>{Swal.showValidationMessage(n)})}).then(n=>{const t=n.value;Swal.fire({icon:"success",title:"Success",text:t.message}).then(()=>{location.reload()})})})});var lastStart="",lastEnd="";$(document).ready(function(n){"use strict";n.datetimepicker.setDateFormatter("moment");n("#dtpStart").datetimepicker({format:"DD/MM/YYYY HH:mm",value:moment().startOf("day").format("DD/MM/YYYY HH:mm")});n("#dtpEnd").datetimepicker({format:"DD/MM/YYYY HH:mm:ss",value:moment()});renderLogTables();lastStart=n("#dtpStart").val();lastEnd=n("#dtpEnd").val();n("#dtpStart,#dtpEnd").on("change",function(){const t=n("#dtpStart").val(),i=n("#dtpEnd").val();(t!==lastStart||i!==lastEnd)&&(lastStart=t,lastEnd=i,n(".log-table").DataTable().destroy(),renderLogTables())});n(".collapse").on("shown.bs.collapse",function(){n(this).parent().find(".fa-angle-down").removeClass("fa-angle-down").addClass("fa-angle-up")}).on("hidden.bs.collapse",function(){n(this).parent().find(".fa-angle-up").removeClass("fa-angle-up").addClass("fa-angle-down")})});$(document).ready(function(n){"use strict";n("#updateTimezone").on("click",()=>{n("#updateTimezone").prop("disabled",!0);const t=n("#timezone option:selected").val();var i={timezone:t};n.postJSON("/User/Update",i,()=>{n("#updateTimezone").prop("disabled",!1),toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr.success("Are you the six fingered man?")})})});